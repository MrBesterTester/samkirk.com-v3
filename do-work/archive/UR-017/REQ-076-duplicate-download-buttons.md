---
id: REQ-076
title: Fix duplicate Interview Summary download buttons in chat
status: completed
created_at: 2026-02-14T12:30:00Z
user_request: UR-017
claimed_at: 2026-02-14T12:35:00Z
route: B
completed_at: 2026-02-14T12:40:00Z
---

# Fix duplicate Interview Summary download buttons in chat

## What
Multiple "Interview Summary" download buttons are appearing in the chat interface as the conversation progresses. There should only be one download button.

## Context
- The Hire Me chat page renders download buttons for the Interview Summary
- As the conversation continues, duplicate download buttons accumulate instead of showing just one
- Likely a rendering issue where the download button is being added per message or per re-render rather than displayed once

---
*Source: During the chat I am getting multiple buttons for downloading "Interview Summary". There should only be one download button, not duplicates appearing as the conversation progresses.*

---

## Triage

**Route: B** - Medium

**Reasoning:** Clear bug with known symptom (duplicate download buttons in chat). Need to explore the Hire Me chat components to find where download buttons are rendered and why they duplicate.

**Planning:** Not required

## Plan

**Planning not required** - Route B: Exploration-guided implementation

Rationale: Clear bug fix — need to find the download button rendering logic in the Hire Me chat and fix the duplication.

*Skipped by work action*

## Exploration

- **Root cause in `web/src/hooks/useHireMe.ts:814-823`**: In `sendMessage`, every API response with `downloadReady: true` unconditionally appends a new download entry to the `downloads` array — no dedup check
- **Rendering in `web/src/app/hire-me/page.tsx:62-84`**: Downloads rendered via `.map()` over `state.downloads`, so duplicate array entries = duplicate buttons
- As conversation progresses, each message response with `downloadReady: true` adds another identical entry

*Generated by Explore agent*

## Implementation Summary

- Modified `web/src/hooks/useHireMe.ts` (lines 814-828)
- Added deduplication guard: `prev.downloads.some(d => d.submissionId === result.submissionId)` check before appending
- Download entry is now only added if no existing entry has the same `submissionId`

*Completed by work action (Route B)*

## Testing

**Tests run:** `npx tsc --noEmit`
**Result:** ✓ useHireMe.ts compiles cleanly (pre-existing errors in unrelated test files only)

**No test file exists** for `useHireMe` hook. Bug fix is a minimal conditional guard — no new tests warranted.

*Verified by work action*
