---
id: REQ-069
title: Move resume citations to separate file in zip download
status: completed
created_at: 2026-02-14T09:45:00Z
user_request: UR-010
claimed_at: 2026-02-14T17:30:00Z
route: B
completed_at: 2026-02-14T17:45:00Z
---

# Move resume citations to separate file in zip download

## What
The generated resume HTML currently appends all citations (47 in the observed example) directly at the bottom of the resume document. These citations clutter the resume and should be moved to a separate file (e.g., `citations.html` or `citations.txt`) within the zip package that users download.

## Context
- The resume HTML (`resume.html`) has a `## Citations` section with numbered entries like `[1] **Employment History > ...**` appended after a `<hr>`
- The HTML already has CSS classes for citations (`.citation-section`, `.citation-item`, `.citation-title`, `.citation-ref`) — these styles can move to the separate file
- The citations provide traceability back to resume chunks used by the LLM — they're valuable for transparency but don't belong in the resume itself
- The zip download is the artifact package users get from the resume generator tool on the Hire Me page
- Resume generation code is in `src/lib/` and the zip packaging likely in the resume generator module

## Assets
- Reference file: `file:///Users/sam/Downloads/submission-V28lTXf-IAdhlB2M9PNrkw/outputs/resume.html` — shows 47 citations cluttering the bottom of the generated resume

---
*Source: It's obvious that the citations are cluttering up the resume itself and should be moved to a separate file in the zip package that's downloaded.*

---

## Triage

**Route: B** - Medium

**Reasoning:** Clear outcome (move citations to separate file in zip), but need to find where zip packaging and citation rendering happen in the codebase.

**Planning:** Not required

## Plan

**Planning not required** - Route B: Exploration-guided implementation

Rationale: The feature is well-defined — strip citations from resume.html and add a separate citations file to the zip. Just need to locate the relevant code.

*Skipped by work action*

## Exploration

- Citations are appended to resume markdown at `resume-generator.ts:736-747` via `appendCitationsToMarkdown()` BEFORE HTML rendering — this is why they end up in resume.html
- The bundler (`artifact-bundler.ts:243-263`) already creates `citations/citations.json` and `citations/citations.md` separately — so citations are duplicated (in resume AND in citations/ folder)
- Key fix: remove the `appendCitationsToMarkdown()` call in `generateResume()` so resume.md and resume.html are stored without citations
- Citations are already stored in Firestore's `SubmissionDoc.citations` and already bundled separately
- `renderCitationsHtml()` exists in `markdown-renderer.ts:426-447` — could be used to create a standalone `citations.html`
- Test coverage exists in `artifact-bundler.test.ts`

*Generated by Explore agent*

## Implementation Summary

- Removed `appendCitationsToMarkdown()` call from `resume-generator.ts` — resume.md and resume.html now generated without citations
- Removed `appendCitationsToMarkdown()` call from `fit-report.ts` — fit report outputs also clean
- Added `citations/citations.html` to zip bundle in `artifact-bundler.ts` using existing `renderCitationsHtml()` + `wrapInDocument()`
- Updated test mocks in `resume-generator.test.ts` and `fit-report.test.ts`
- Updated assertions in `artifact-bundler.test.ts` for new `citations.html` file

*Completed by work action (Route B)*

## Testing

**Tests run:** npm test (from web/)
**Result:** All 1232 tests passing (38 test files)

**Tests updated:**
- `resume-generator.test.ts` — removed `appendCitationsToMarkdown` mock
- `fit-report.test.ts` — removed `appendCitationsToMarkdown` mock
- `artifact-bundler.test.ts` — added assertions for `citations/citations.html`

*Verified by work action*
