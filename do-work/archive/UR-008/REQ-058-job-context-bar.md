---
id: REQ-058
title: "JobContextBar"
status: completed
created_at: 2026-02-13T00:00:00Z
user_request: UR-008
claimed_at: 2026-02-13T17:48:00Z
route: B
completed_at: 2026-02-13T17:51:00Z
related: [REQ-057, REQ-059, REQ-060, REQ-061, REQ-062]
batch: "hire-me-unified-phase-1"
source_step: "1.2"
source_doc: "docs/hire-me-unified-TODO.md"
blueprint_ref: "docs/hire-me-unified-BLUEPRINT.md"
model_hint: "Opus 4.5"
---

# JobContextBar (Step 1.2)

## What
Build a collapsible top bar component that manages job posting input. It has three visual states: collapsed-empty (prompts user to add a job), expanded (shows paste/URL/file input tabs), and collapsed-loaded (shows job title/company with swap/remove buttons). Persists to sessionStorage.

## Checklist
- [x] Build `JobContextBar.tsx` with three states: collapsed-empty, expanded (input form), collapsed-loaded
- [x] Reuse paste/URL/file tab logic from existing `JobInputForm`
- [x] Persist job context to sessionStorage
- [x] Restore job context from sessionStorage on mount
- [x] Emit `onJobLoaded` / `onJobCleared` callbacks

## Blueprint Guidance
**`JobContextBar.tsx`** — Collapsible top bar
- Collapsed (no job): "Add a job posting to unlock fit analysis and custom resume" + expand button
- Expanded: Same paste/URL/file tabs as current `JobInputForm` + submit + cancel
- Loaded: Shows job title/company (or "Job posting loaded") + swap/remove buttons
- Persists to sessionStorage

## Context
- **Document set**: hire-me-unified
- **Phase**: 1 — Extract Shared Components
- **Specification**: See docs/hire-me-unified-SPECIFICATION.md for full requirements
- **Model recommendation**: Opus 4.5 (advisory)

## Dependencies
Depends on Step 1.1 (directory creation). The existing `JobInputForm` component should be referenced for paste/URL/file tab logic.

---
*Source: docs/hire-me-unified-TODO.md, Step 1.2*

---

## Triage

**Route: B** - Medium

**Reasoning:** Clear feature with well-defined states but need to find existing JobInputForm tab logic and styling patterns to reuse.

**Planning:** Not required

## Plan

**Planning not required** - Route B: Exploration-guided implementation

Rationale: Clear three-state component. Just need existing patterns from JobInputForm to replicate tab logic.

*Skipped by work action*

## Exploration

- `JobInputForm` is defined inline in `web/src/app/hire-me/fit/page.tsx` (lines 87-277) and duplicated in `resume/page.tsx`
- Uses `InputMode = "paste" | "url" | "file"` type for three tabs
- Tab styling: `bg-zinc-100 dark:bg-zinc-800` container, active tabs get `bg-white shadow dark:bg-zinc-700`
- Paste mode: textarea `h-64`, stores to sessionStorage key `"hire-me-job-input"`
- URL mode: text input with `type="url"`
- File mode: drag-and-drop area accepting `.pdf,.docx,.txt,.md`
- Submit calls `onSubmit(mode, data)` with `{ text?, url?, file? }`
- Tailwind v4 with design tokens, dark mode ready
- React hooks for state management, no global store
- Props needed: `jobContext`, `onLoad`, `onClear`, `isLoading`

*Generated by Explore agent*

## Implementation Summary

- Created `web/src/components/hire-me/JobContextBar.tsx` with three visual states (collapsed-empty, expanded, collapsed-loaded)
- Reused paste/URL/file tab logic from existing `JobInputForm` with matching Tailwind styling
- SessionStorage persistence under key `"hire-me-job-context"` with restore on mount
- Props: `onJobLoaded`, `onJobCleared`, `isLoading`, `jobTitle`, `jobCompany`
- Exported `JobContextBar`, `InputMode`, `JobInputData`, `JobContextBarProps` from barrel `index.ts`

*Completed by work action (Route B)*

## Testing

**Tests run:** `npx tsc --noEmit`
**Result:** Zero new errors — all errors are pre-existing in unrelated test files

New component is a UI component with no complex logic warranting unit tests at this stage; will be covered by E2E tests in REQ-066.

*Verified by work action*
