---
id: REQ-042
title: Fix sr-only radio button click in E2E tests
status: completed
created_at: 2026-02-13T12:50:00Z
user_request: UR-006
claimed_at: 2026-02-13T13:00:00Z
route: B
completed_at: 2026-02-13T13:05:00Z
---

# Fix sr-only Radio Button Click in E2E Tests

## What
Fix the radio button click in E2E full-flow tests — the `sr-only` hidden input is blocked by a styled `<span>` overlay that intercepts pointer events. Use label click or `{ force: true }` to bypass.

## Context
- Failing test: `web/e2e/fit-tool.spec.ts:243` (URL-mode full-flow test) — `locator('input[type="radio"]').first().click()` fails because a `<span>` element intercepts pointer events
- Same pattern exists in paste-mode and file-upload full-flow tests at equivalent spots, but only triggers when the LLM generates radio-button follow-up questions (non-deterministic)
- The radio inputs have `class="sr-only"` (screen-reader only / visually hidden) with styled span overlays for the custom radio appearance
- Error: `<span class="mr-3 flex h-5 w-5 items-center justify-center rounded-full border-2..."> intercepts pointer events`
- Fix all 3 full-flow tests in fit-tool.spec.ts (paste, URL, file upload) that have this radio click pattern

---
*Source: fix the radio button click in fit-tool.spec.ts URL-mode test — the sr-only input is blocked by a styled span overlay*

---

## Triage

**Route: B** - Medium

**Reasoning:** Bug fix with clear approach (label click or force:true), but need to find equivalent radio click spots across 3 full-flow tests in fit-tool.spec.ts.

**Planning:** Not required

## Plan

**Planning not required** - Route B: Exploration-guided implementation

Rationale: Fix approach is specified (label click or force:true). Need exploration to find all radio click patterns across the 3 full-flow tests.

*Skipped by work action*

## Exploration

**Failing lines in `web/e2e/fit-tool.spec.ts`:**
- Line 110 (paste-mode full-flow)
- Line 243 (URL-mode full-flow)
- Line 348 (file-upload full-flow)

All three use the same pattern:
```typescript
const radioOptions = page.locator('input[type="radio"]');
if (radioCount > 0) {
  await radioOptions.first().click(); // fails - sr-only input blocked by span overlay
}
```

**DOM structure** (`web/src/app/hire-me/fit/page.tsx:328-359`):
```
<label cursor-pointer>
  <input type="radio" class="sr-only" />   ← hidden input
  <span class="mr-3 flex h-5 w-5..."/>     ← styled overlay (intercepts clicks)
  <span>{option text}</span>
</label>
```

**Best fix:** Click the parent `<label>` instead of the hidden input, since the label wraps the input and handles the click natively. Alternatively, `{ force: true }` works but is less idiomatic.

**No other E2E tests** interact with radio buttons — fit-tool is the only one.

*Generated by Explore agent*

## Implementation Summary

- Changed radio click locator in all 3 full-flow tests from `page.locator('input[type="radio"]')` to `page.locator('label:has(input[type="radio"])')`
- Lines 106, 240, 346 in `web/e2e/fit-tool.spec.ts`
- Renamed variable `radioOptions` → `radioLabels` for clarity
- Added comments explaining why label click is used instead of direct input click

*Completed by work action (Route B)*

## Testing

**Tests run:** `npx playwright test e2e/fit-tool.spec.ts`
**Result:** 6/7 passed, 1 pre-existing failure

**Pre-existing failure:** URL-mode test line 282 — timeout waiting for "fit analysis complete" text (LLM response timing issue, unrelated to radio click fix)

**Radio click fix verified:** All 3 full-flow tests passed through the radio button section without pointer events interception errors. The fix correctly bypasses the sr-only input overlay by clicking the parent label.

*Verified by work action*
